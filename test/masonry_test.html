<!DOCTYPE html>
<html>

<head>
    <link href="../brainsapp.css" rel="stylesheet">
    <script src="../bower_components/jquery/dist/jquery.js"></script>
    <script src="../brainsapp.js"></script>
    <script src="../bower_components/angular/angular.min.js"></script>
    <script src="../js/masonry/masonry.js"></script>
    <style>
        #masonry {
            width: 100%;
            display: flex;
            justify-content: center;
            min-height: 200px;
        }

        .masonry-column {
            border: 1px solid lightgray;
            padding: auto 5px;
        }

        .masonry-item {
            margin-bottom: 10px;
            border: 1px solid;
        }

    </style>
</head>

<body ng-app="testmasonry">
    <div class="ba-container" ng-controller="MainController">
        <div id="masonry" class="masonry1 ba-dynamic-row">
            <div class="ba-dynamic-col" ng-repeat="i in test">
                <div class="panel masonry-item" ng-repeat=" a in i" style="height:{{a.height}}">
                    {{a.name}}
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    console.log(window.ba)
    var generateEntries = function(a) {
        var out = new Array();
        for (var i = 0; i < a; i++) {
            out.push({
                height: window.ba.util.random.int(50, 300) + 'px',
                name: window.ba.util.random.string(10)
            });
        }
        return out;
    }

</script>
<script>
    var app = angular.module("testmasonry", []);
    app.controller('MainController', ['$scope','$timeout', function($scope,$timeout) {
        var testEntries = generateEntries(10);
        $scope.test = window.ba.masonry.init("masonry1", testEntries);
        $timeout(function(){
            $scope.test = window.ba.masonry.resize("masonry1",$scope.test);
            console.log($scope.test);
        },10000)
    }]);

</script>

</html>
